{let e,t,l,r,o,n,f,s,a,i,u,d,w,_,v,c,g,h,S,x,y,T,V,b,m;f=(n=Object).getPrototypeOf,s=document,i={},u=f(a={isConnected:1}),d=f(f),w=(e,t,l,r)=>(e??(setTimeout(l,r),new Set)).add(t),_=(e,t,r)=>{let o=l;l=t;try{return e(r)}catch(e){return console.error(e),r}finally{l=o}},v=e=>e.filter(e=>e.t?.isConnected),c=t=>o=w(o,t,()=>{for(let e of o)e.l=v(e.l),e.o=v(e.o);o=e},1e3),g={get val(){return l?.add(this),this.i},get oldVal(){return l?.add(this),this.u},set val(l){let r=this;if(l!==r.i){r.i=l;let o=[...r.o=v(r.o)];for(let t of o)y(t.f,t.s,t.t),t.t=e;r.l.length?t=w(t,r,b):r.u=l}}},h=e=>({__proto__:g,i:e,u:e,l:[],o:[]}),S=e=>f(e??0)===g,x=(e,t)=>{let l=new Set,o={f:e},n=r;r=[];let f=_(e,l,t);f=(f??s).nodeType?f:new Text(f);for(let e of l)c(e),e.l.push(o);for(let e of r)e.t=f;return r=n,o.t=f},y=(e,t=h(),l)=>{let o=new Set,n={f:e,s:t};n.t=l??r?.push(n)??a,t.val=_(e,o);for(let e of o)c(e),e.o.push(n);return t},V=t=>new Proxy((l,...r)=>{let[o,...a]=f(r[0]??0)===u?r:[{},...r],w=t?s.createElementNS(t,l):s.createElement(l);for(let[t,r]of n.entries(o)){let o=l=>l?n.getOwnPropertyDescriptor(l,t)??o(f(l)):e,s=l+","+t,a=i[s]??(i[s]=o(f(w))?.set??0),u=a?a.bind(w):w.setAttribute.bind(w,t),_=f(r??0);_===g?x(()=>(u(r.val),w)):_!==d||t.startsWith("on")&&!r.v?u(r):x(()=>(u(r()),w))}return T(w,...a)},{get:(t,l)=>t.bind(e,l)}),b=()=>{let l=[...t].filter(e=>e.i!==e.u);t=e;for(let t of new Set(l.flatMap(e=>e.l=v(e.l)))){let l=t.t,r=x(t.f,l);t.t=e,r!==l&&(r!=e?l.replaceWith(r):l.remove())}for(let e of l)e.u=e.i},m={add:T=(t,...l)=>{for(let r of l.flat(1/0)){let l,o=f(r??0);if(o===g){let t=new Text;l=x(()=>{let{val:l}=r;return l==e?e:(t.textContent=r.val,t)})}else l=o===d?x(r):r;l!=e&&t.append(l)}return t},_:e=>(e.v=1,e),tags:V(),tagsNS:V,state:h,val:e=>S(e)?e.val:e,oldVal:e=>S(e)?e.oldVal:e,derive:y},window.van=m;}